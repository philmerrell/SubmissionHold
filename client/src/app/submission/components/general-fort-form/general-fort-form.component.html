
<div>
  <div [formGroup]="submissionForm">
    <ion-card>
      <ion-card-header>
        <ion-card-title>General</ion-card-title>
      </ion-card-header>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label [color]="validateControl('name', 'required') ? 'danger' : 'secondary'" position="stacked">Performer or Act Name</ion-label>
              <ion-input formControlName="name"></ion-input>
            </ion-item>
            <ion-text *ngIf="validateControl('name', 'required')" color="danger">
              Performer or Act Name is required.
            </ion-text>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label [color]="validateControl('description', 'required') ? 'danger' : 'secondary'" color="secondary"
                position="stacked">Bio</ion-label>
              <ion-textarea formControlName="description" placeholder="Tell us about yourself AND the project you want to bring to Treefort" rows="5" [spellcheck]="true"></ion-textarea>
            </ion-item>
            <ion-text *ngIf="validateControl('description', 'required')" color="danger">
              Bio is required.
            </ion-text>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label [color]="validateControl('statement', 'required') ? 'danger' : 'secondary'" position="stacked">
                Why do you want to participate in Treefort?</ion-label>
              <ion-textarea formControlName="statement" [spellcheck]="true"></ion-textarea>
            </ion-item>
            <ion-text *ngIf="validateControl('statement', 'required')" color="danger">
              Statement is required.
            </ion-text>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label color="secondary" position="stacked">Website</ion-label>
              <ion-input formControlName="website" placeholder="Enter primary web link"></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item (click)="fileInput.click()" button detail="false">
              <ion-thumbnail slot="end">
                <ion-img *ngIf="imageDataUrl" [src]="imageDataUrl"></ion-img>
                <ion-img *ngIf="submissionForm.get('image').value" [src]="submissionForm.get('image').value"></ion-img>
              </ion-thumbnail>
              <!-- <ion-icon slot="start" color="tertiary" size="large"></ion-icon> -->
              <ion-label [color]="validateControl('image', 'required') ? 'danger' : 'secondary'" position="stacked">
                Choose an image
              </ion-label>
              <h3>{{ imageFileName }}</h3>
              <input #fileInput (change)="addFile($event)" class="ion-hide" type="file" accept="image/*">
            </ion-item>
            <ion-text *ngIf="validateControl('image', 'required')" color="danger">
              Artist image is required.
            </ion-text>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card>
  
  
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          Location
        </ion-card-title>
      </ion-card-header>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label [color]="validateLocationControl('city', 'required') ? 'danger' : 'secondary'"
                position="stacked">City</ion-label>
              <ion-input formControlName="city"></ion-input>
            </ion-item>
            <ion-text *ngIf="validateLocationControl('city', 'required')" color="danger">
              City is required.
            </ion-text>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item *ngIf="!isInternational" class="state-select">
              <ion-label position="stacked" [color]="validateLocationControl('state', 'required') ? 'danger' : 'secondary'">Select a State
              </ion-label>
              <ion-select formControlName="state">
                <ion-select-option *ngFor="let state of states" [value]="state.value">{{ state.label }}</ion-select-option>
              </ion-select>
            </ion-item>
            <ion-text
              *ngIf="validateLocationControl('state', 'required') && !submissionForm.get('isInternational').value"
              color="danger">
              State is required.
            </ion-text>
  
            <ion-item *ngIf="isInternational">
              <ion-label [color]="validateLocationControl('country', 'required') ? 'danger' : 'secondary'"
                position="stacked">Country</ion-label>
              <ion-input formControlName="country"></ion-input>
            </ion-item>
            <ion-text *ngIf="validateLocationControl('country', 'required')" color="danger">
              Country is required.
            </ion-text>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label>Is This a Non U.S. Based Artist?</ion-label>
              <ion-checkbox formControlName="isInternational">
              </ion-checkbox>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card>
    <div formGroupName="links">
      <ion-card>
        <ion-card-header>
          <ion-card-title>
            Links
          </ion-card-title>
        </ion-card-header>
        <ion-grid>
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label color="secondary" position="stacked">Apple Music</ion-label>
                <ion-input formControlName="appleMusic"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label color="secondary" position="stacked">Spotify</ion-label>
                <ion-input formControlName="spotify"></ion-input>
              </ion-item>
              <!-- <ion-item>
                <ion-label color="secondary" position="stacked">Bandcamp</ion-label>
                <ion-input formControlName="bandcamp"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label color="secondary" position="stacked">Soundcloud</ion-label>
                <ion-input formControlName="soundcloud"></ion-input>
              </ion-item> -->
              <ion-item>
                <ion-label color="secondary" position="stacked">Facebook</ion-label>
                <ion-input formControlName="facebook"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label color="secondary" position="stacked">Instagram</ion-label>
                <ion-input formControlName="instagram"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label color="secondary" position="stacked">Twitter</ion-label>
                <ion-input formControlName="twitter"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label color="secondary" position="stacked">Tik-Tok</ion-label>
                <ion-input formControlName="tiktok"></ion-input>
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card>
      <ion-card>
        <ion-card-header>
          <ion-card-title>
            Videos
          </ion-card-title>
          <ion-card-subtitle>Submit up to 3 videos</ion-card-subtitle>
        </ion-card-header>
        <ion-grid>
          <ion-row *ngFor="let videos of getVideosFormArray(submissionForm); let i = index" formArrayName="videos">
            <ion-col>
              <ion-item>
                <ion-label position="stacked" color="secondary">Video Url</ion-label>
                <ion-input [formControlName]="i"></ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="auto">
              <ion-button (click)="addVideosFormControl()" size="small" fill="solid" color="success" shape="round"
                [disabled]="getVideosFormArray(submissionForm).length >= 3">
                <ion-icon slot="icon-only" name="add"></ion-icon>
              </ion-button>
              <ion-button (click)="removeVideosFormControl(i)" size="small" fill="clear" color="danger"
                [disabled]="getVideosFormArray(submissionForm).length === 1">
                <ion-icon slot="icon-only" name="trash"></ion-icon>
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card>
    </div>
  
    <ion-card formGroupName="contactInfo">
      <ion-card-header>
        <ion-card-title>
          Contact Info
        </ion-card-title>
      </ion-card-header>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label [color]="validateControl('contactInfo.name', 'required') ? 'danger' : 'secondary'"
                position="stacked">Submitter Name</ion-label>
              <ion-input formControlName="name"></ion-input>
            </ion-item>
            <ion-text *ngIf="validateControl('contactInfo.name', 'required')" color="danger">
              Submitter Name is required.
            </ion-text>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label [color]="(validateControl('contactInfo.email', 'email') || validateControl('contactInfo.email', 'required')) ? 'danger' : 'secondary'"
                position="stacked">Submitter Email</ion-label>
              <ion-input formControlName="email" type="email" inputmode="email"></ion-input>
            </ion-item>
            <ion-text *ngIf="validateControl('contactInfo.email', 'email')" color="danger">
              A valid submitter email is required.
            </ion-text>
            <ion-text *ngIf="validateControl('contactInfo.email', 'required')" color="danger">
              Submitter email is required.
            </ion-text>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label [color]="validateControl('contactInfo.phoneNumber', 'required') ? 'danger' : 'secondary'"
                position="stacked">Submitter Phone</ion-label>
              <ion-input formControlName="phoneNumber"></ion-input>
            </ion-item>
            <ion-text *ngIf="validateControl('contactInfo.phoneNumber', 'required')" color="danger">
              Submitter phone number is required.
            </ion-text>
          </ion-col>
        </ion-row>
        <!-- <ion-row>
          <ion-col>
            <ion-item>
              <ion-label [color]="validateControl('contactInfo.relationship', 'required') ? 'danger' : 'secondary'" color="secondary"
                position="stacked">Relationship to artist</ion-label>
              <ion-select formControlName="relationship" cancelText="Nah"
                okText="Okay!">
                <ion-select-option value="agent">Agent</ion-select-option>
                <ion-select-option value="manager">Manager</ion-select-option>
                <ion-select-option value="member">Member</ion-select-option>
                <ion-select-option value="mom">Mom</ion-select-option>
                <ion-select-option value="other">Other</ion-select-option>
              </ion-select>
            </ion-item>
            <ion-text *ngIf="validateControl('contactInfo.relationship', 'required')" color="danger">
              Please choose one.
            </ion-text>
          </ion-col>
        </ion-row> -->
        <!-- <ion-row>
          <ion-col>
            <ion-item>
              <ion-label color="secondary" position="stacked">Management</ion-label>
              <ion-input formControlName="managementContact" [spellcheck]="true"></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label color="secondary" position="stacked">Agent</ion-label>
              <ion-input formControlName="agentContact" [spellcheck]="true"></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label color="secondary" position="stacked">Publicity</ion-label>
              <ion-input formControlName="publicityContact" [spellcheck]="true"></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label color="secondary" position="stacked">Label</ion-label>
              <ion-input formControlName="labelContact" [spellcheck]="true"></ion-input>
            </ion-item>
          </ion-col>
        </ion-row> -->
      </ion-grid>
    </ion-card>
    <h2>
      <ion-text *ngIf="showRequiredFieldsMissingWarning && !submissionForm.valid" color="danger">You have one or more required fields missing.</ion-text>
    </h2>
  </div>
  <div class="ion-padding">
    <ion-button (click)="submitForm()" [disabled]="submissionPending" expand="block">
      <span *ngIf="!submissionPending">Submit</span>
      <ion-spinner *ngIf="submissionPending" name="crescent"></ion-spinner>
    </ion-button>
  </div>
</div>