<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/admin/settings" text="Settings"></ion-back-button>
    </ion-buttons>
    <ion-title *ngIf="festival">{{ festival.name }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="presentComposeFestivalModal(festival)">Edit</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header *ngIf="festival" mode="ios" collapse="condense">
    <ion-toolbar>
      <ion-title size="large">{{ festival.name }}</ion-title>
      <ion-buttons slot="end">
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <div *ngIf="festival">
    <ion-list>
      <ion-item>
        <ion-label>
          <p>{{ festival.startDateTime | date:'short' }} - {{ festival.endDateTime | date:'short' }}</p>
          <h2>{{ festival.guidelines }}</h2>
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-label>Danger Zone:</ion-label>
        <ion-button (click)="presentDeleteFestivalAlert()" color="danger" fill="clear">Delete Festival</ion-button>
      </ion-item>
    </ion-list>
    
    <ion-list-header>
      <ion-label>Forts</ion-label>
      <ion-spinner *ngIf="!fortCreateComplete" name="crescent"></ion-spinner>
      <ion-button (click)="presentComposeFortAlert()">Create</ion-button>
    </ion-list-header>
    <ion-list *ngIf="fortsRequestComplete">
      <ion-item *ngFor="let fort of forts">
        <ion-label>
          <h2>{{ fort.name }}</h2>
        </ion-label>
        <ion-spinner *ngIf="fortPendingDeleteId === fort.id" name="crescent"></ion-spinner>
        <ion-button (click)="presentDeleteFortAlert(fort)" slot="end" fill="clear" color="danger">Delete</ion-button>
      </ion-item>
      <ion-item *ngIf="!forts.length">
        <h1>No forts have been created yet.</h1>
      </ion-item>
    </ion-list>
    <ion-list *ngIf="!fortsRequestComplete">
      <ion-item>
        <ion-skeleton-text animated></ion-skeleton-text>
      </ion-item>
      <ion-item>
        <ion-skeleton-text animated></ion-skeleton-text>
      </ion-item>
    </ion-list>
    
    
    <!-- <pre>
      {{ festival | json }}
    </pre> -->
  </div>

  
</ion-content>
